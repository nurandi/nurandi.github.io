<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Twitter Authentication dengan ROAuth dan httr | PaperMod</title>
<meta name="keywords" content="R, twitter">
<meta name="description" content="Twitter menerapkan OAuth (saat ini OAuth 1.0a) dalam penyediaan akses ke API-nya. OAuth adalah sebuah authorization framework yang memungkinkan aplikasi pihak ketiga untuk mendapatkan akses terbatas secara aman dan ringkas. Dengan OAuth, untuk melakukan request ke API Twitter, setiap aplikasi harus terlebih dahulu mendapatkan OAuth access token. Access token ini yang kemudian digunakan untuk membuat &ldquo;permintaan resmi&rdquo; ke API Twitter, baik REST maupun Streaming.
Pada R, Twitter authentication dapat dilakukan dengan mudah dengan menggunakan fungsi setup_twitter_oauth() yang tersedia pada package twitteR seperti telah kita diskusikan pada artikel sebelumnya.">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="/blog/twitter-authentication-dengan-roauth-dan-httr/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.0c4fd3725171366f335155acde6fb3c7b7042cd2fd075bebf5023d9b28a701b2.css" integrity="sha256-DE/TclFxNm8zUVWs3m&#43;zx7cELNL9B1vr9QI9myinAbI=" rel="preload stylesheet" as="style">
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="/blog/twitter-authentication-dengan-roauth-dan-httr/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Twitter Authentication dengan ROAuth dan httr" />
<meta property="og:description" content="Twitter menerapkan OAuth (saat ini OAuth 1.0a) dalam penyediaan akses ke API-nya. OAuth adalah sebuah authorization framework yang memungkinkan aplikasi pihak ketiga untuk mendapatkan akses terbatas secara aman dan ringkas. Dengan OAuth, untuk melakukan request ke API Twitter, setiap aplikasi harus terlebih dahulu mendapatkan OAuth access token. Access token ini yang kemudian digunakan untuk membuat &ldquo;permintaan resmi&rdquo; ke API Twitter, baik REST maupun Streaming.
Pada R, Twitter authentication dapat dilakukan dengan mudah dengan menggunakan fungsi setup_twitter_oauth() yang tersedia pada package twitteR seperti telah kita diskusikan pada artikel sebelumnya." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/twitter-authentication-dengan-roauth-dan-httr/" /><meta property="og:image" content="/papermod-cover.png"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2016-02-08T09:58:11+07:00" />
<meta property="article:modified_time" content="2016-02-08T09:58:11+07:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/papermod-cover.png"/>

<meta name="twitter:title" content="Twitter Authentication dengan ROAuth dan httr"/>
<meta name="twitter:description" content="Twitter menerapkan OAuth (saat ini OAuth 1.0a) dalam penyediaan akses ke API-nya. OAuth adalah sebuah authorization framework yang memungkinkan aplikasi pihak ketiga untuk mendapatkan akses terbatas secara aman dan ringkas. Dengan OAuth, untuk melakukan request ke API Twitter, setiap aplikasi harus terlebih dahulu mendapatkan OAuth access token. Access token ini yang kemudian digunakan untuk membuat &ldquo;permintaan resmi&rdquo; ke API Twitter, baik REST maupun Streaming.
Pada R, Twitter authentication dapat dilakukan dengan mudah dengan menggunakan fungsi setup_twitter_oauth() yang tersedia pada package twitteR seperti telah kita diskusikan pada artikel sebelumnya."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blogs",
      "item": "/blog/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Twitter Authentication dengan ROAuth dan httr",
      "item": "/blog/twitter-authentication-dengan-roauth-dan-httr/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Twitter Authentication dengan ROAuth dan httr",
  "name": "Twitter Authentication dengan ROAuth dan httr",
  "description": "Twitter menerapkan OAuth (saat ini OAuth 1.0a) dalam penyediaan akses ke API-nya. OAuth adalah sebuah authorization framework yang memungkinkan aplikasi pihak ketiga untuk mendapatkan akses terbatas secara aman dan ringkas. Dengan OAuth, untuk melakukan request ke API Twitter, setiap aplikasi harus terlebih dahulu mendapatkan OAuth access token. Access token ini yang kemudian digunakan untuk membuat \u0026ldquo;permintaan resmi\u0026rdquo; ke API Twitter, baik REST maupun Streaming.\nPada R, Twitter authentication dapat dilakukan dengan mudah dengan menggunakan fungsi setup_twitter_oauth() yang tersedia pada package twitteR seperti telah kita diskusikan pada artikel sebelumnya.",
  "keywords": [
    "R", "twitter"
  ],
  "articleBody": "Twitter menerapkan OAuth (saat ini OAuth 1.0a) dalam penyediaan akses ke API-nya. OAuth adalah sebuah authorization framework yang memungkinkan aplikasi pihak ketiga untuk mendapatkan akses terbatas secara aman dan ringkas. Dengan OAuth, untuk melakukan request ke API Twitter, setiap aplikasi harus terlebih dahulu mendapatkan OAuth access token. Access token ini yang kemudian digunakan untuk membuat “permintaan resmi” ke API Twitter, baik REST maupun Streaming.\nPada R, Twitter authentication dapat dilakukan dengan mudah dengan menggunakan fungsi setup_twitter_oauth() yang tersedia pada package twitteR seperti telah kita diskusikan pada artikel sebelumnya. Pada kesempatan ini, saya lebih tertarik untuk membahas proses autentikasi secara “semi-manual” dengan menggunakan package ROAuth dan httr. Mmmm… Ternyata masih seputar API Twitter, semoga tidak membosankan :)\nROAuth dan httr ROAuth (ditulis oleh Jeff Gentry) merupakan interface untuk melakukan autentikasi ke server yang menerapkan OAuth. ROAuth menangani proses handshakes dan men-generate signatures. Sedangkan httr (ditulis oleh Hadley Wickham) merupakan interface ke web API yang telah support OAuth 1.0 dan 2.0. Kedua package tersebut akan kita gunakan untuk membuat authenticated requests, sehingga akses ke API Twitter dapat dilakukan melalui R console.\nTwitter authentication menggunakan ROAuth dan httr Proses autentikasi Twitter dengan menggunakan ROAuth dan httr dapat dilakukan dengan tahapan sebagai berikut.\nInstall package Bisa dari CRAN:\ninstall.packages(c(\"ROAuth\", \"httr\") Atau dari Github untuk versi development-nya\nlibrary(devtools) install_github(c(\"geoffjentry/ROAuth\", \"hadley/httr\") Generate access token Setiap request ke API Twitter membutuhkan “sepaket” credentials yang terdiri dari consumer key (API key), consumer secret (API secret), serta access token dan access token secret. Credentials tersebut bisa dipoleh dengan cara mendaftarkan sebuah aplikasi melalui apps.twitter.com. Pastikan Callback URL pada Application Management - Settings dikosongkan. Setelah mendaftarkan aplikasi, buka tab Keys and Access Tokens - di sana dapat kita temukan credentials yang diperlukan untuk autentikasi.\nHanya tersedia consumer key dan consumer secret ketika aplikasi baru dibuat. Untuk mendapatkan access token dan access token secret, klik tombol Create my access token. Sekarang, kembali ke R dan simpan key dan token tersebut. Misalnya:\nconsumerKey \u003c- \"XXX\" consumerSecret \u003c- \"XXX\" accessToken \u003c- \"XXX\" accessTokenSecret \u003c- \"XXX\" Selain di-copy-paste dari Aplication Management, access token dan access token secret juga dapat di-generate oleh R menggunakan package ROAuth.\nlibrary(ROAuth) consumerKey \u003c- \"XXX\" consumerSecret \u003c- \"XXX\" requestURL \u003c- \"https://api.twitter.com/oauth/request_token\" authURL \u003c- \"https://api.twitter.com/oauth/authorize\" accessURL \u003c- \"https://api.twitter.com/oauth/access_token\" creds \u003c- OAuthFactory$new(consumerKey = consumerKey, consumerSecret = consumerSecret, requestURL = requestURL, accessURL = accessURL, authURL = authURL) creds$handshake() Begitu script di atas dijalankan, proses handshaking dimulai. R akan memberikan link (URL) yang harus kita buka melalui browser (biasanya browser akan membuka link tersebut secara otomatis).\nTo enable the connection, please direct your web browser to: https://api.twitter.com/oauth/authorize?oauth_token=JFvu2AAAAAAAkQ9EAXXXXXXX\rWhen complete, record the PIN given to you and provide it here: Browser akan menampilkan laman di mana kita diminta untuk memberikan “izin” kepada aplikasi.\n![Authorise app]({{ site.url }}{{ site.baseurl }}/img/blog/2016-02-08-twitter-authentication-dengan-roauth-dan-httr/twitter-auth-token1.png)\nKlik “Authorize app”, Twitter akan menampilkan sebuah PIN.\n![Enter PIN]({{ site.url }}{{ site.baseurl }}/img/blog/2016-02-08-twitter-authentication-dengan-roauth-dan-httr/twitter-auth-token2.png)\nCopy-paste PIN tersebut ke R console, dan tekan enter - access token berhasil kita generate. Jika terjadi error\nError in function (type, msg, asError = TRUE) : SSL certificate problem: unable to get local issuer certificate\rinstal package RCurl, lalu tambahkan parameter pada creds$handshake() sehingga menjadi\ncreds$handshake(cainfo = system.file(\"CurlSSL\", \"cacert.pem\", package = \"RCurl\")) Seluruh credentials telah disimpan pada objek creds. Selanjutnya, ekstrak access token:\naccessToken \u003c- creds$oauthKey accessTokenSecret \u003c- creds$oauthSecret Twitter token Setelah mendapatkan consumer key dan access token, inilah saatnya kita membuat Twitter token yang mengemas semua data yang dipersyaratkan untuk OAuth access, meliputi credentials dan berbagai parameters. Untuk tujuan ini kita gunakan package httr:\nlibrary(httr) app \u003c- oauth_app(\"twitter\", key = consumerKey, secret = consumerSecret) twitter_token \u003c- Token1.0$new(endpoint = NULL, params = list(as_header = TRUE), app = app, credentials = list(oauth_token = accessToken, oauth_token_secret = accessTokenSecret)) DONE! Proses autentikasi selesai. Sekarang kita dapat men-download data Twitter, baik melalui REST API maupun Streaming API.\nDownload data Twitter Twitter menyediakan banyak sekali API - terutama REST API - misalnya search tweets untuk mencari tweet berdasarkan kata kunci tertentu, statuses user timeline untuk mendapatkan tweet terakhir yang diposting oleh user tertentu, atau followers ids untuk mendapatkan daftar ID follower dari user tertentu. Kita dapat menggunakan fungsi GET pada package httr untuk mendapatkan data twitter melalui APIs tersebut.\nSaya membuat fungsi sederhana untuk mencari tweet berdasarkan kata kunci (keyword) tertentu :\nsearch_twitter \u003c- function(keyword, token) { require(httr) baseurl \u003c- \"https://api.twitter.com/1.1/search/tweets.json?q=\" url \u003c- paste0(baseurl, URLencode(keyword)) response \u003c- GET(url, config(token = token)) content \u003c- content(response)[[1]] text \u003c- unlist(sapply(content,function(x) x$text)) return(text) } Misalnya, kita akan mencari tweet dengan kata kunci “angkot bogor”:\nangkot_bogor \u003c- search_twitter(\"angkot bogor\", token = twitter_token)\rHasilnya:\nangkot_bogor # [1] \"Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/hD7nkjjlHt #Bogor\" # [2] \"Catatan kecil kehidupan di hari ini... maaf cuma iseng... \\nUdah lama ga jalan2 ke bogor, liat angkot masih… — https://t.co/VsaBjUaIkc\" # [3] \"Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/txYWQ8kzkm #Bogor\" # [4] \"Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/dMSyKnnhMg #Bogor\" # [5] \"Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/8ZK3yCY1Zy #Bogor\" # [6] \"RT @NyunyuCom: Kalo di Bogor, jangan sampe salah milih angkot! Biar kalo mau kemana-mana cepet, pilih angkot yg kayak gini gaes! https://t.…\" # [7] \"Kalo di Bogor, jangan sampe salah milih angkot! Biar kalo mau kemana-mana cepet, pilih angkot yg kayak gini gaes! https://t.co/hlA0tsDTSp\" # [8] \"Kota hujan. Kota sejuta angkot. \\xf0\\u009f\\u009a\\u0098\\u26c5\\u2614\\xf0\\u009f\\u008c\\u009e @ Patung Kujang Bogor https://t.co/xZiOvisWvv\" # [9] \"BOCORE - Angkot Bogor - Rp 70.000,- (S/M/L/XL/XXL) SMS/Telp : 081574232423 https://t.co/VRykHK1EkK https://t.co/GmoXJ9n4Zt #kaos #bogor\" # [10] \"Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/UGxAD9PaUU #Bogor\" # [11] \"Move movee.....to second place we go....ujan2an di Bogor.....ihiiiyyyy...… (at Angkot 02 Cisarua Sukasari) — https://t.co/CANS9sTLlq\" # [12] \"RT @BogorSelatan_: Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/Ac5J52xA7I #trafjak\" # [13] \"pasar ciawi tetep pasar tumpah dan tempat ngetem angkot depan pasar macet hallloooo wakikota Bogor ,,, mana bukti nya ????\" # [14] \"Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/mBMZXt5jXA #Bogor #Jabar\" # [15] \"Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/H5M8UuVyJ9 #Bogor\" [UPDATE#1:] Sebelumnya telah dibahas bahwa dalam proses autentikasi Twitter menggunakan httr::Token1.0 diperlukan consumer key dan access token. Access token dapat diperoleh baik dari laman applications management maupun dengan cara handshaking menggunakan ROAuth::OAuthFactory. Kabar baiknya, dengan hanya berbekal consumer key dan consumer secret, kita sebenarnya bisa langsung melakukan autentikasi (generate Twitter token) menggunakan fungsi httr::oauth1.0_token.\nlibrary(httr) app \u003c- oauth_app(\"twitter\", key = consumerKey, secret = consumerSecret) twitter_token \u003c- oauth1.0_token(oauth_endpoints(\"twitter\"), app = app) R console akan menampilkan pesan berikut:\nWaiting for authentication in browser...\rPress Esc/Ctrl + C to abort\rAuthentication complete.\rDengan fungsi ini, proses autentikasi dilakukan dalam browser dan kita tidak perlu memasukkan PIN. Biarkan R bekerja dan tunggu beberapa detik sampai proses autentikasi selesai. Agar autentikasi berhasil, Callback URL wajib diisi dengan http://127.0.0.1:1410.\nDengan demikian, setidaknya ada tiga alternatif yang bisa digunakan dalam proses autentikasi seperti yang tampilkan dalam flow-char berikut.\n![Twitter OAuth flowchar]({{ site.url }}{{ site.baseurl }}/img/blog/2016-02-08-twitter-authentication-dengan-roauth-dan-httr/twitter-auth-flowchart.png)\n[UPDATE#2:] Twitter token yang di-generate baik oleh httr::Token1.0 maupun httr::oauth1.0_token dapat digunakan sebagai pengganti fungsi setup_twitter_oauth() pada package twitteR.\nassign(\"oauth_token\", twitter_token) library(twitteR) tweets \u003c- searchTwitter(\"indonesia raya\") sapply(head(tweets), statusText) # [1] \"Roy suryo iki kritik menpora saiki, koyo pener wae leh mu jabat ndan. Ngapalke indonesia raya sik wae :)))\" # [2] \"Waduh bapak menpora ga pernah ikut upacara nih jadi ga hafal INDONESIA RAYA :(\" # [3] \"Alhamdulillah, hari ini panen raya padi sehat di sawah Daqu Sehat Indonesia, Sukabumi. Seluruh https://t.co/4kbWuBGC65\" # [4] \"RT @wawaraji: Sharing dg @basuki_btp gerakan @qluesmartcity #BERANIBERUBAH bersama @indorunners diawali nyanyikan Indonesia Raya https://t.…\" # [5] \"ماشاءالله تبارك الله \\n\\nRio Haryanto Menggegerkan Austria GP2 Series 2015 Juara dan Indonesia Raya Berkumandang,... https://t.co/aUPzxewj4A\" # [6] \"@UnsoedOfficial Apa Curug Favorit Netizen Banyumas Raya? https://t.co/A0O8JF2l2m #PollingTIN via @Times_indonesia\" Selamat mencoba, semoga bermanfaat :)\nCredits: smappR by SMaPP at New York University streamR by Pablo Barberá ROAuth by Jeff Gentry httr by Hadley Wickham ",
  "wordCount" : "1314",
  "inLanguage": "en",
  "datePublished": "2016-02-08T09:58:11+07:00",
  "dateModified": "2016-02-08T09:58:11+07:00",
  "author":{
    "@type": "Person",
    "name": "Theme PaperMod"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/blog/twitter-authentication-dengan-roauth-dan-httr/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PaperMod",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="PaperMod (Alt + H)">PaperMod</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="/fr/" title="French"
                            aria-label=":fr:">🇫🇷</a>
                    </li>
                    <li>
                        <a href="/fa/" title="Fa"
                            aria-label="Fa">Fa</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="/search/" title="Search">
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://discord.gg/ahpmTvhVmp" title="Discord">
                    <span>Discord</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/blog/">Blogs</a></div>
    <h1 class="post-title">
      Twitter Authentication dengan ROAuth dan httr
    </h1>
    <div class="post-meta"><span title='2016-02-08 09:58:11 +0700 +07'>February 8, 2016</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Theme PaperMod&nbsp;|&nbsp;<a href="https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/content/blog/2016-02-08-twitter-authentication-dengan-roauth-dan-httr/index.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#roauth-dan-httr" aria-label="ROAuth dan httr">ROAuth dan httr</a></li>
                <li>
                    <a href="#twitter-authentication-menggunakan-roauth-dan-httr" aria-label="Twitter authentication menggunakan ROAuth dan httr">Twitter <em>authentication</em> menggunakan ROAuth dan httr</a></li>
                <li>
                    <a href="#install-package" aria-label="Install package">Install package</a></li>
                <li>
                    <a href="#generate-access-token" aria-label="Generate access token">Generate access token</a></li>
                <li>
                    <a href="#twitter-token" aria-label="Twitter token">Twitter token</a></li>
                <li>
                    <a href="#download-data-twitter" aria-label="Download data Twitter">Download data Twitter</a><ul>
                        <ul>
                        
                <li>
                    <a href="#credits" aria-label="Credits:">Credits:</a>
                </li>
            </ul>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Twitter menerapkan <a href="http://oauth.net/">OAuth</a> (saat ini <a href="http://tools.ietf.org/html/rfc5849">OAuth
1.0a</a>) dalam penyediaan akses ke
API-nya. OAuth adalah sebuah <em><strong>authorization framework</strong></em> yang
memungkinkan aplikasi pihak ketiga untuk mendapatkan akses terbatas
secara aman dan ringkas. Dengan OAuth, untuk melakukan <em>request</em> ke API
Twitter, setiap aplikasi harus terlebih dahulu mendapatkan <em><strong>OAuth
access token</strong></em>. <em>Access token</em> ini yang kemudian digunakan untuk
membuat <a href="https://dev.twitter.com/oauth/overview/authorizing-requests">&ldquo;permintaan
resmi&rdquo;</a> ke
API Twitter, baik <a href="https://dev.twitter.com/rest/public">REST</a> maupun
<a href="https://dev.twitter.com/streaming/overview">Streaming</a>.</p>
<p>Pada R, <em>Twitter authentication</em> dapat dilakukan dengan mudah dengan
menggunakan fungsi <code>setup_twitter_oauth()</code> yang tersedia pada <em>package</em>
<a href="https://github.com/geoffjentry/twitteR"><strong>twitteR</strong></a> seperti telah kita
diskusikan pada <a href="https://nurandi.id/blog/twitter-authentication-dengan-r/">artikel
sebelumnya</a>.
Pada kesempatan ini, saya lebih tertarik untuk membahas proses
autentikasi secara <strong>&ldquo;semi-manual&rdquo;</strong> dengan menggunakan <em>package</em>
<a href="https://cran.r-project.org/package=ROAuth"><strong>ROAuth</strong></a> dan
<a href="https://cran.r-project.org/package=httr"><strong>httr</strong></a>. <em>Mmmm&hellip;</em> Ternyata
masih seputar <a href="https://dev.twitter.com/rest/public">API Twitter</a>, semoga
tidak membosankan :)</p>
<h2 id="roauth-dan-httr">ROAuth dan httr<a hidden class="anchor" aria-hidden="true" href="#roauth-dan-httr">#</a></h2>
<p><strong>ROAuth</strong> (ditulis oleh <a href="https://github.com/geoffjentry">Jeff Gentry</a>)
merupakan <em>interface</em> untuk melakukan autentikasi ke server yang
menerapkan OAuth. ROAuth menangani proses <em>handshakes</em> dan
men-<em>generate</em>
<a href="https://dev.twitter.com/oauth/overview/creating-signatures"><em><strong>signatures</strong></em></a>.
Sedangkan <strong>httr</strong> (ditulis oleh <a href="https://github.com/hadley">Hadley
Wickham</a>) merupakan <em>interface</em> ke web API
yang telah <em>support</em> OAuth 1.0 dan 2.0. Kedua <em>package</em> tersebut akan
kita gunakan untuk membuat <em>authenticated requests</em>, sehingga akses ke
API Twitter dapat dilakukan melalui <em>R console</em>.</p>
<h2 id="twitter-authentication-menggunakan-roauth-dan-httr">Twitter <em>authentication</em> menggunakan ROAuth dan httr<a hidden class="anchor" aria-hidden="true" href="#twitter-authentication-menggunakan-roauth-dan-httr">#</a></h2>
<p>Proses autentikasi Twitter dengan menggunakan <strong>ROAuth</strong> dan <strong>httr</strong>
dapat dilakukan dengan tahapan sebagai berikut.</p>
<h2 id="install-package">Install package<a hidden class="anchor" aria-hidden="true" href="#install-package">#</a></h2>
<p>Bisa dari <a href="https://cran.r-project.org/">CRAN</a>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;ROAuth&#34;</span><span class="p">,</span> <span class="s">&#34;httr&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>Atau dari <a href="https://github.com">Github</a> untuk versi <em>development</em>-nya</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">devtools</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">install_github</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;geoffjentry/ROAuth&#34;</span><span class="p">,</span> <span class="s">&#34;hadley/httr&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="generate-access-token">Generate access token<a hidden class="anchor" aria-hidden="true" href="#generate-access-token">#</a></h2>
<p>Setiap <em>request</em> ke API Twitter membutuhkan &ldquo;sepaket&rdquo; <em>credentials</em> yang
terdiri dari <em>consumer key (API key)</em>, <em>consumer secret (API secret)</em>,
serta <em>access token</em> dan <em>access token secret</em>. <em>Credentials</em> tersebut
bisa dipoleh dengan cara <a href="https://nurandi.id/blog/twitter-authentication-dengan-r/">mendaftarkan sebuah
aplikasi</a>
melalui <a href="https://apps.twitter.com/">apps.twitter.com</a>. Pastikan
<em>Callback URL</em> pada <a href="https://apps.twitter.com/">Application Management -
Settings</a> dikosongkan. Setelah mendaftarkan
aplikasi, buka tab <strong>Keys and Access Tokens</strong> - di sana dapat kita
temukan <em>credentials</em> yang diperlukan untuk autentikasi.</p>
<p>Hanya tersedia <em>consumer key</em> dan <em>consumer secret</em> ketika aplikasi baru
dibuat. Untuk mendapatkan <em>access token</em> dan <em>access token secret</em>, klik
tombol <strong>Create my access token</strong>. Sekarang, kembali ke R dan simpan
<em>key</em> dan <em>token</em> tersebut. Misalnya:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">consumerKey</span> <span class="o">&lt;-</span> <span class="s">&#34;XXX&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">consumerSecret</span> <span class="o">&lt;-</span> <span class="s">&#34;XXX&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">accessToken</span> <span class="o">&lt;-</span> <span class="s">&#34;XXX&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">accessTokenSecret</span> <span class="o">&lt;-</span> <span class="s">&#34;XXX&#34;</span>
</span></span></code></pre></div><p>Selain di-<em>copy-paste</em> dari <a href="https://apps.twitter.com/"><em>Aplication
Management</em></a>, <em>access token</em> dan <em>access
token secret</em> juga dapat di-<em>generate</em> oleh R menggunakan <em>package</em>
<strong>ROAuth</strong>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">ROAuth</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">consumerKey</span> <span class="o">&lt;-</span> <span class="s">&#34;XXX&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">consumerSecret</span> <span class="o">&lt;-</span> <span class="s">&#34;XXX&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">requestURL</span> <span class="o">&lt;-</span> <span class="s">&#34;https://api.twitter.com/oauth/request_token&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">authURL</span> <span class="o">&lt;-</span> <span class="s">&#34;https://api.twitter.com/oauth/authorize&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">accessURL</span> <span class="o">&lt;-</span> <span class="s">&#34;https://api.twitter.com/oauth/access_token&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">creds</span> <span class="o">&lt;-</span> <span class="n">OAuthFactory</span><span class="o">$</span><span class="nf">new</span><span class="p">(</span><span class="n">consumerKey</span> <span class="o">=</span> <span class="n">consumerKey</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="n">consumerSecret</span> <span class="o">=</span> <span class="n">consumerSecret</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="n">requestURL</span> <span class="o">=</span> <span class="n">requestURL</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="n">accessURL</span> <span class="o">=</span> <span class="n">accessURL</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="n">authURL</span> <span class="o">=</span> <span class="n">authURL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">creds</span><span class="o">$</span><span class="nf">handshake</span><span class="p">()</span>
</span></span></code></pre></div><p>Begitu <em>script</em> di atas dijalankan, proses <em>handshaking</em> dimulai. R akan
memberikan link (URL) yang harus kita buka melalui browser (biasanya
browser akan membuka link tersebut secara otomatis).</p>
<pre><code>To enable the connection, please direct your web browser to: 
https://api.twitter.com/oauth/authorize?oauth_token=JFvu2AAAAAAAkQ9EAXXXXXXX
When complete, record the PIN given to you and provide it here: 
</code></pre>
<p>Browser akan menampilkan laman di mana kita diminta untuk memberikan
&ldquo;izin&rdquo; kepada aplikasi.</p>
<p>![Authorise app]({{ site.url }}{{ site.baseurl }}/img/blog/2016-02-08-twitter-authentication-dengan-roauth-dan-httr/twitter-auth-token1.png)</p>
<p>Klik <strong>&ldquo;Authorize app&rdquo;</strong>, Twitter akan menampilkan sebuah <strong>PIN</strong>.</p>
<p>![Enter PIN]({{ site.url }}{{ site.baseurl }}/img/blog/2016-02-08-twitter-authentication-dengan-roauth-dan-httr/twitter-auth-token2.png)</p>
<p><em>Copy-paste</em> PIN tersebut ke <em>R console</em>, dan tekan <strong>enter</strong> - <em>access
token</em> berhasil kita <em>generate</em>. Jika terjadi <em>error</em></p>
<pre><code>Error in function (type, msg, asError = TRUE)  : 
  SSL certificate problem: unable to get local issuer certificate
</code></pre>
<p>instal <em>package</em> <a href="https://cran.r-project.org/package=RCurl"><strong>RCurl</strong></a>,
lalu tambahkan parameter pada <code>creds$handshake()</code> sehingga menjadi</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">creds</span><span class="o">$</span><span class="nf">handshake</span><span class="p">(</span><span class="n">cainfo</span> <span class="o">=</span> <span class="nf">system.file</span><span class="p">(</span><span class="s">&#34;CurlSSL&#34;</span><span class="p">,</span> <span class="s">&#34;cacert.pem&#34;</span><span class="p">,</span> <span class="n">package</span> <span class="o">=</span> <span class="s">&#34;RCurl&#34;</span><span class="p">))</span>
</span></span></code></pre></div><p>Seluruh <em>credentials</em> telah disimpan pada objek <code>creds</code>. Selanjutnya,
ekstrak <em>access token</em>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">accessToken</span> <span class="o">&lt;-</span> <span class="n">creds</span><span class="o">$</span><span class="n">oauthKey</span>
</span></span><span class="line"><span class="cl"><span class="n">accessTokenSecret</span> <span class="o">&lt;-</span> <span class="n">creds</span><span class="o">$</span><span class="n">oauthSecret</span>
</span></span></code></pre></div><h2 id="twitter-token">Twitter token<a hidden class="anchor" aria-hidden="true" href="#twitter-token">#</a></h2>
<p>Setelah mendapatkan <em>consumer key</em> dan <em>access token</em>, inilah saatnya
kita membuat <em>Twitter token</em> yang mengemas semua data yang
dipersyaratkan untuk <em>OAuth access</em>, meliputi <em>credentials</em> dan berbagai
<em>parameters</em>. Untuk tujuan ini kita gunakan <em>package</em> <strong>httr</strong>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">httr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">app</span> <span class="o">&lt;-</span> <span class="nf">oauth_app</span><span class="p">(</span><span class="s">&#34;twitter&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">key</span> <span class="o">=</span> <span class="n">consumerKey</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">secret</span> <span class="o">=</span> <span class="n">consumerSecret</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">twitter_token</span> <span class="o">&lt;-</span> <span class="n">Token1.0</span><span class="o">$</span><span class="nf">new</span><span class="p">(</span><span class="n">endpoint</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                              <span class="n">params</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">as_header</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                              <span class="n">app</span> <span class="o">=</span> <span class="n">app</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                              <span class="n">credentials</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">oauth_token</span> <span class="o">=</span> <span class="n">accessToken</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                                 <span class="n">oauth_token_secret</span> <span class="o">=</span> <span class="n">accessTokenSecret</span><span class="p">))</span>
</span></span></code></pre></div><p><strong>DONE!</strong> Proses autentikasi selesai. Sekarang kita dapat men-<em>download</em>
data Twitter, baik melalui <a href="https://dev.twitter.com/rest/public">REST
API</a> maupun <a href="https://dev.twitter.com/streaming/overview">Streaming
API</a>.</p>
<hr>
<h2 id="download-data-twitter">Download data Twitter<a hidden class="anchor" aria-hidden="true" href="#download-data-twitter">#</a></h2>
<p>Twitter menyediakan banyak sekali API - terutama REST API - misalnya
<a href="https://dev.twitter.com/rest/public/search">search tweets</a> untuk
mencari tweet berdasarkan kata kunci tertentu, <a href="https://dev.twitter.com/rest/reference/get/statuses/user_timeline">statuses user
timeline</a>
untuk mendapatkan tweet terakhir yang diposting oleh user tertentu, atau
<a href="https://dev.twitter.com/rest/reference/get/followers/ids">followers
ids</a> untuk
mendapatkan daftar <em>ID follower</em> dari user tertentu. Kita dapat
menggunakan fungsi <code>GET</code> pada <em>package</em> <strong>httr</strong> untuk mendapatkan data
twitter melalui APIs tersebut.</p>
<p>Saya membuat fungsi sederhana untuk mencari tweet berdasarkan kata kunci
<em>(keyword)</em> tertentu :</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">search_twitter</span> <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span><span class="n">keyword</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nf">require</span><span class="p">(</span><span class="n">httr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">baseurl</span> <span class="o">&lt;-</span> <span class="s">&#34;https://api.twitter.com/1.1/search/tweets.json?q=&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="n">url</span> <span class="o">&lt;-</span> <span class="nf">paste0</span><span class="p">(</span><span class="n">baseurl</span><span class="p">,</span> <span class="nf">URLencode</span><span class="p">(</span><span class="n">keyword</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">response</span> <span class="o">&lt;-</span> <span class="nf">GET</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nf">config</span><span class="p">(</span><span class="n">token</span> <span class="o">=</span> <span class="n">token</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="n">content</span> <span class="o">&lt;-</span> <span class="nf">content</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="n">[[1]]</span>
</span></span><span class="line"><span class="cl">  <span class="n">text</span> <span class="o">&lt;-</span> <span class="nf">unlist</span><span class="p">(</span><span class="nf">sapply</span><span class="p">(</span><span class="n">content</span><span class="p">,</span><span class="kr">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">x</span><span class="o">$</span><span class="n">text</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">return</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Misalnya, kita akan mencari tweet dengan kata kunci <strong>&ldquo;angkot bogor&rdquo;</strong>:</p>
<pre><code>angkot_bogor &lt;- search_twitter(&quot;angkot bogor&quot;, token = twitter_token)
</code></pre>
<p>Hasilnya:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">angkot_bogor</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#  [1] &#34;Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/hD7nkjjlHt #Bogor&#34;                                            </span>
</span></span><span class="line"><span class="cl"><span class="c1">#  [2] &#34;Catatan kecil kehidupan di hari ini... maaf cuma iseng... \nUdah lama ga jalan2 ke bogor, liat angkot masih… — https://t.co/VsaBjUaIkc&#34;      </span>
</span></span><span class="line"><span class="cl"><span class="c1">#  [3] &#34;Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/txYWQ8kzkm #Bogor&#34;                                            </span>
</span></span><span class="line"><span class="cl"><span class="c1">#  [4] &#34;Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/dMSyKnnhMg #Bogor&#34;                                            </span>
</span></span><span class="line"><span class="cl"><span class="c1">#  [5] &#34;Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/8ZK3yCY1Zy #Bogor&#34;                                            </span>
</span></span><span class="line"><span class="cl"><span class="c1">#  [6] &#34;RT @NyunyuCom: Kalo di Bogor, jangan sampe salah milih angkot! Biar kalo mau kemana-mana cepet, pilih angkot yg kayak gini gaes! https://t.…&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  [7] &#34;Kalo di Bogor, jangan sampe salah milih angkot! Biar kalo mau kemana-mana cepet, pilih angkot yg kayak gini gaes! https://t.co/hlA0tsDTSp&#34;   </span>
</span></span><span class="line"><span class="cl"><span class="c1">#  [8] &#34;Kota hujan. Kota sejuta angkot. \xf0\u009f\u009a\u0098\u26c5\u2614\xf0\u009f\u008c\u009e @ Patung Kujang Bogor https://t.co/xZiOvisWvv&#34;      </span>
</span></span><span class="line"><span class="cl"><span class="c1">#  [9] &#34;BOCORE - Angkot Bogor - Rp 70.000,- (S/M/L/XL/XXL) SMS/Telp : 081574232423 https://t.co/VRykHK1EkK https://t.co/GmoXJ9n4Zt #kaos #bogor&#34;     </span>
</span></span><span class="line"><span class="cl"><span class="c1"># [10] &#34;Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/UGxAD9PaUU #Bogor&#34;                                            </span>
</span></span><span class="line"><span class="cl"><span class="c1"># [11] &#34;Move movee.....to second place we go....ujan2an di Bogor.....ihiiiyyyy...… (at Angkot 02 Cisarua Sukasari) — https://t.co/CANS9sTLlq&#34;        </span>
</span></span><span class="line"><span class="cl"><span class="c1"># [12] &#34;RT @BogorSelatan_: Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/Ac5J52xA7I #trafjak&#34;                       </span>
</span></span><span class="line"><span class="cl"><span class="c1"># [13] &#34;pasar ciawi tetep pasar tumpah dan tempat ngetem angkot depan pasar macet hallloooo wakikota Bogor ,,, mana bukti nya ????&#34;                  </span>
</span></span><span class="line"><span class="cl"><span class="c1"># [14] &#34;Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/mBMZXt5jXA #Bogor #Jabar&#34;                                     </span>
</span></span><span class="line"><span class="cl"><span class="c1"># [15] &#34;Program One Way di Kota Bogor Terbentur Rute Angkot - Pojok Jabar https://t.co/H5M8UuVyJ9 #Bogor&#34; </span>
</span></span></code></pre></div><hr>
<p>[<strong>UPDATE#1:</strong>] Sebelumnya telah dibahas bahwa dalam proses
autentikasi Twitter menggunakan <code>httr::Token1.0</code> diperlukan <em>consumer
key</em> dan <em>access token</em>. <em>Access token</em> dapat diperoleh baik dari laman
<em>applications management</em> maupun dengan cara <em>handshaking</em> menggunakan
<code>ROAuth::OAuthFactory</code>. Kabar baiknya, dengan hanya berbekal <em>consumer
key</em> dan <em>consumer secret</em>, kita sebenarnya bisa langsung melakukan
autentikasi <em>(generate Twitter token)</em> menggunakan fungsi
<code>httr::oauth1.0_token</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">httr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">app</span> <span class="o">&lt;-</span> <span class="nf">oauth_app</span><span class="p">(</span><span class="s">&#34;twitter&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">key</span> <span class="o">=</span> <span class="n">consumerKey</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">secret</span> <span class="o">=</span> <span class="n">consumerSecret</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">twitter_token</span> <span class="o">&lt;-</span> <span class="nf">oauth1.0_token</span><span class="p">(</span><span class="nf">oauth_endpoints</span><span class="p">(</span><span class="s">&#34;twitter&#34;</span><span class="p">),</span> <span class="n">app</span> <span class="o">=</span> <span class="n">app</span><span class="p">)</span>
</span></span></code></pre></div><p><em>R console</em> akan menampilkan pesan berikut:</p>
<pre><code>Waiting for authentication in browser...
Press Esc/Ctrl + C to abort
Authentication complete.
</code></pre>
<p>Dengan fungsi ini, proses autentikasi dilakukan dalam browser dan kita
tidak perlu memasukkan PIN. Biarkan R bekerja dan tunggu beberapa detik
sampai proses autentikasi selesai. Agar autentikasi berhasil, <em>Callback
URL</em> <strong>wajib</strong> diisi dengan <code>http://127.0.0.1:1410</code>.</p>
<p>Dengan demikian, setidaknya ada tiga alternatif yang bisa digunakan
dalam proses autentikasi seperti yang tampilkan dalam <em>flow-char</em>
berikut.</p>
<p>![Twitter OAuth flowchar]({{ site.url }}{{ site.baseurl }}/img/blog/2016-02-08-twitter-authentication-dengan-roauth-dan-httr/twitter-auth-flowchart.png)</p>
<p>[<strong>UPDATE#2:</strong>] <em>Twitter token</em> yang di-<em>generate</em> baik
oleh <code>httr::Token1.0</code> maupun <code>httr::oauth1.0_token</code> dapat digunakan
sebagai pengganti fungsi <code>setup_twitter_oauth()</code> pada <em>package</em>
<a href="http://nurandi.id/blog/crawling-data-twitter-menggunakan-r/"><strong>twitteR</strong></a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">assign</span><span class="p">(</span><span class="s">&#34;oauth_token&#34;</span><span class="p">,</span> <span class="n">twitter_token</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">twitteR</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">tweets</span> <span class="o">&lt;-</span> <span class="nf">searchTwitter</span><span class="p">(</span><span class="s">&#34;indonesia raya&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">sapply</span><span class="p">(</span><span class="nf">head</span><span class="p">(</span><span class="n">tweets</span><span class="p">),</span> <span class="n">statusText</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># [1] &#34;Roy suryo iki kritik menpora saiki, koyo pener wae leh mu jabat ndan. Ngapalke indonesia raya sik wae :)))&#34;                                  </span>
</span></span><span class="line"><span class="cl"><span class="c1"># [2] &#34;Waduh bapak menpora ga pernah ikut upacara nih jadi ga hafal INDONESIA RAYA :(&#34;                                                              </span>
</span></span><span class="line"><span class="cl"><span class="c1"># [3] &#34;Alhamdulillah, hari ini panen raya padi sehat di sawah Daqu Sehat Indonesia, Sukabumi. Seluruh https://t.co/4kbWuBGC65&#34;                     </span>
</span></span><span class="line"><span class="cl"><span class="c1"># [4] &#34;RT @wawaraji: Sharing dg @basuki_btp gerakan @qluesmartcity #BERANIBERUBAH bersama @indorunners diawali nyanyikan Indonesia Raya https://t.…&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># [5] &#34;ماشاءالله تبارك الله \n\nRio Haryanto Menggegerkan Austria GP2 Series 2015 Juara dan Indonesia Raya Berkumandang,... https://t.co/aUPzxewj4A&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># [6] &#34;@UnsoedOfficial Apa Curug Favorit Netizen Banyumas Raya? https://t.co/A0O8JF2l2m #PollingTIN via @Times_indonesia&#34;</span>
</span></span></code></pre></div><p>Selamat mencoba, semoga bermanfaat :)</p>
<hr>
<h4 id="credits">Credits:<a hidden class="anchor" aria-hidden="true" href="#credits">#</a></h4>
<ul>
<li><a href="https://github.com/SMAPPNYU/smappR">smappR</a> by <a href="http://smapp.nyu.edu/">SMaPP at New York
University</a></li>
<li><a href="https://github.com/pablobarbera/streamR/blob/master/streamR/R/filterStream.R">streamR</a>
by <a href="http://pablobarbera.com/">Pablo Barberá</a></li>
<li><a href="https://github.com/geoffjentry/ROAuth">ROAuth</a> by <a href="https://github.com/geoffjentry">Jeff
Gentry</a></li>
<li><a href="https://github.com/hadley/httr">httr</a> by <a href="https://github.com/hadley">Hadley
Wickham</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/r/">R</a></li>
      <li><a href="/tags/twitter/">twitter</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="/blog/membuat-peta-dengan-r-dan-leaflet/">
    <span class="title">« Prev</span>
    <br>
    <span>Membuat Peta dengan R dan Leaflet: Contoh Data Twitter</span>
  </a>
  <a class="next" href="/blog/syntax-highlighter-dengan-prism-js-pada-wordpress/">
    <span class="title">Next »</span>
    <br>
    <span>Syntax Highlighter dengan Prism.js pada Wordpress</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Twitter Authentication dengan ROAuth dan httr on x"
        href="https://x.com/intent/tweet/?text=Twitter%20Authentication%20dengan%20ROAuth%20dan%20httr&amp;url=%2fblog%2ftwitter-authentication-dengan-roauth-dan-httr%2f&amp;hashtags=R%2ctwitter">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z"/>
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Twitter Authentication dengan ROAuth dan httr on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fblog%2ftwitter-authentication-dengan-roauth-dan-httr%2f&amp;title=Twitter%20Authentication%20dengan%20ROAuth%20dan%20httr&amp;summary=Twitter%20Authentication%20dengan%20ROAuth%20dan%20httr&amp;source=%2fblog%2ftwitter-authentication-dengan-roauth-dan-httr%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Twitter Authentication dengan ROAuth dan httr on reddit"
        href="https://reddit.com/submit?url=%2fblog%2ftwitter-authentication-dengan-roauth-dan-httr%2f&title=Twitter%20Authentication%20dengan%20ROAuth%20dan%20httr">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Twitter Authentication dengan ROAuth dan httr on facebook"
        href="https://facebook.com/sharer/sharer.php?u=%2fblog%2ftwitter-authentication-dengan-roauth-dan-httr%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Twitter Authentication dengan ROAuth dan httr on whatsapp"
        href="https://api.whatsapp.com/send?text=Twitter%20Authentication%20dengan%20ROAuth%20dan%20httr%20-%20%2fblog%2ftwitter-authentication-dengan-roauth-dan-httr%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Twitter Authentication dengan ROAuth dan httr on telegram"
        href="https://telegram.me/share/url?text=Twitter%20Authentication%20dengan%20ROAuth%20dan%20httr&amp;url=%2fblog%2ftwitter-authentication-dengan-roauth-dan-httr%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Twitter Authentication dengan ROAuth dan httr on ycombinator"
        href="https://news.ycombinator.com/submitlink?t=Twitter%20Authentication%20dengan%20ROAuth%20dan%20httr&u=%2fblog%2ftwitter-authentication-dengan-roauth-dan-httr%2f">
        <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
            xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
            <path
                d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="/">PaperMod</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
